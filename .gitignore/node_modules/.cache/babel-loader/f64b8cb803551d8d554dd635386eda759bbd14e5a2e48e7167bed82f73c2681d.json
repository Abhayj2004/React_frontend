{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"./signToSpeech.css\";import{FaVolumeUp,FaMicrophone,FaRegCheckCircle,FaLanguage}from\"react-icons/fa\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SignToSpeech(){const[livePrediction,setLivePrediction]=useState(\"...\");const[rawText,setRawText]=useState(\"...\");const[finalText,setFinalText]=useState(\"...\");const speak=async(text,lang)=>{try{const response=await fetch(\"http://localhost:5000/speak\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({text,lang})});if(!response.ok)throw new Error(\"Failed to fetch audio\");const blob=await response.blob();const audioUrl=URL.createObjectURL(blob);const audio=new Audio(audioUrl);await audio.play();}catch(error){console.error(\"Speech playback error:\",error);}};const fetchText=async()=>{try{const res=await fetch(\"http://localhost:5000/get_text\");const data=await res.json();setLivePrediction(data.live_prediction);setRawText(data.raw_text);setFinalText(data.final_text);}catch(err){console.error(\"Fetch error:\",err);}};const finalizeText=async()=>{await fetch(\"http://localhost:5000/finalize_text\",{method:\"POST\"});fetchText();};useEffect(()=>{const interval=setInterval(fetchText,1000);return()=>clearInterval(interval);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(FaLanguage,{style:{marginRight:10}}),\" SIGN TO SPEECH\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"video-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:5000/video_feed\",alt:\"Sign Stream\"})}),/*#__PURE__*/_jsxs(\"button\",{onClick:finalizeText,children:[/*#__PURE__*/_jsx(FaRegCheckCircle,{style:{marginRight:8}}),\"Finalize Text\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-display\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(FaMicrophone,{style:{color:\"#d35400\",marginRight:8}}),\" Live Prediction: \",livePrediction]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Constructed Sentence: \",rawText]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Final Text: \",finalText]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tts-buttons\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(FaVolumeUp,{}),\" Convert Final Text to Speech:\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>speak(finalText,\"en\"),children:\"Speak English\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>speak(finalText,\"hi\"),children:\"Speak Hindi\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>speak(finalText,\"mr\"),children:\"Speak Marathi\"})]})]});}export default SignToSpeech;","map":{"version":3,"names":["React","useEffect","useState","FaVolumeUp","FaMicrophone","FaRegCheckCircle","FaLanguage","jsx","_jsx","jsxs","_jsxs","SignToSpeech","livePrediction","setLivePrediction","rawText","setRawText","finalText","setFinalText","speak","text","lang","response","fetch","method","headers","body","JSON","stringify","ok","Error","blob","audioUrl","URL","createObjectURL","audio","Audio","play","error","console","fetchText","res","data","json","live_prediction","raw_text","final_text","err","finalizeText","interval","setInterval","clearInterval","className","children","style","marginRight","src","alt","onClick","color"],"sources":["C:/Users/japar/Desktop/APP/React-frontend/src/components/HomeComponents/signToSpeech/signToSpeech.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./signToSpeech.css\";\r\nimport { FaVolumeUp, FaMicrophone, FaRegCheckCircle, FaLanguage } from \"react-icons/fa\";\r\n\r\nfunction SignToSpeech() {\r\n  const [livePrediction, setLivePrediction] = useState(\"...\");\r\n  const [rawText, setRawText] = useState(\"...\");\r\n  const [finalText, setFinalText] = useState(\"...\");\r\n\r\n  const speak = async (text, lang) => {\r\n    try {\r\n      const response = await fetch(\"http://localhost:5000/speak\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ text, lang }),\r\n      });\r\n\r\n      if (!response.ok) throw new Error(\"Failed to fetch audio\");\r\n      const blob = await response.blob();\r\n      const audioUrl = URL.createObjectURL(blob);\r\n      const audio = new Audio(audioUrl);\r\n      await audio.play();\r\n    } catch (error) {\r\n      console.error(\"Speech playback error:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchText = async () => {\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/get_text\");\r\n      const data = await res.json();\r\n      setLivePrediction(data.live_prediction);\r\n      setRawText(data.raw_text);\r\n      setFinalText(data.final_text);\r\n    } catch (err) {\r\n      console.error(\"Fetch error:\", err);\r\n    }\r\n  };\r\n\r\n  const finalizeText = async () => {\r\n    await fetch(\"http://localhost:5000/finalize_text\", { method: \"POST\" });\r\n    fetchText();\r\n  };\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(fetchText, 1000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <h1><FaLanguage style={{ marginRight: 10 }} /> SIGN TO SPEECH</h1>\r\n\r\n      <div className=\"video-container\">\r\n        <img src=\"http://localhost:5000/video_feed\" alt=\"Sign Stream\" />\r\n      </div>\r\n\r\n      <button onClick={finalizeText}>\r\n        <FaRegCheckCircle style={{ marginRight: 8 }} />\r\n        Finalize Text\r\n      </button>\r\n\r\n      <div className=\"text-display\">\r\n        <h3><FaMicrophone style={{ color: \"#d35400\", marginRight: 8 }} /> Live Prediction: {livePrediction}</h3>\r\n        <h4>Constructed Sentence: {rawText}</h4>\r\n        <h5>Final Text: {finalText}</h5>\r\n      </div>\r\n\r\n      <div className=\"tts-buttons\">\r\n        <h4><FaVolumeUp /> Convert Final Text to Speech:</h4>\r\n        <button onClick={() => speak(finalText, \"en\")}>Speak English</button>\r\n        <button onClick={() => speak(finalText, \"hi\")}>Speak Hindi</button>\r\n        <button onClick={() => speak(finalText, \"mr\")}>Speak Marathi</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignToSpeech;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}